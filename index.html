
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>
    <title>六十甲子抽籤</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
        }

        .marquee-container {
            position: relative;
            width: 300px;
            height: 200px;
            overflow: hidden;
            margin: 50px auto;
            border: 2px solid #000;
            background-color: #f8f8f8;
        }

        .marquee-wrapper {
            position: absolute;
            top: 0;
            left: 0;
            display: flex;
            flex-direction: column;
        }

        .marquee-wrapper span {
            padding: 10px;
            font-size: 18px;
            text-align: center;
            line-height: 40px;
            height: 40px;
            font-family: 'Arial', sans-serif;
        }

        .highlight {
            background-color: pink;
        }

        .pointer {
            position: absolute;
            top: 0;
            left: -30px;
            width: 30px;
            height: 40px;
            background-color: red;
            color: white;
            font-size: 20px;
            text-align: center;
            line-height: 40px;
            border-radius: 5px;
            transform: rotate(90deg);
            z-index: 1;
        }



        #spin-button {
            display: block;
            margin: 20px auto;
            padding: 10px 20px;
            font-size: 16px;
            cursor: pointer;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 5px;
        }
    </style>
</head>

<body>
    <div class="container text-center">
        <div class="row align-items-start">
            <div class="col">
                <h4>日辰</h4>
                <div class="marquee-container">
                    <div class="pointer">↑</div>
                    <div class="marquee-wrapper" id="marquee">
                        <!-- 六十甲子的項目會顯示在這裡 -->
                    </div>
                </div>
            </div>

            <div class="col">
                <h4>月將</h4>
                <div class="marquee-container">
                    <div class="pointer">↑</div>
                    <div class="marquee-wrapper" id="marquee2">
                        <!-- 六十甲子的項目會顯示在這裡 -->
                    </div>
                </div>
            </div>
            <div class="col">
                <h4>占時</h4>
                <div class="marquee-container">
                    <div class="pointer">↑</div>
                    <div class="marquee-wrapper" id="marquee3">
                        <!-- 六十甲子的項目會顯示在這裡 -->
                    </div>
                </div>
            </div>
        </div>
    </div>


    <button id="spin-button">抽籤</button>


    <script>
        // 六十甲子的列表
        const sixtyJiazi = [
            "甲子", "乙丑", "丙寅", "丁卯", "戊辰", "己巳", "庚午", "辛未", "壬申", "癸酉",
            "甲戌", "乙亥", "丙子", "丁丑", "戊寅", "己卯", "庚辰", "辛巳", "壬午", "癸未",
            "甲申", "乙酉", "丙戌", "丁亥", "戊子", "己丑", "庚寅", "辛卯", "壬辰", "癸巳",
            "甲午", "乙未", "丙申", "丁酉", "戊戌", "己亥", "庚子", "辛丑", "壬寅", "癸卯",
            "甲辰", "乙巳", "丙午", "丁未", "戊申", "己酉", "庚戌", "辛亥", "壬子", "癸丑",
            "甲寅", "乙卯", "丙辰", "丁巳", "戊午", "己未", "庚申", "辛酉", "壬戌", "癸亥"
        ];

        const sixtyJiazi2 = [
            "子", "丑", "寅", "卯", "辰", "巳", "午", "未", "申", "酉",
            "戌", "亥"
        ];

        const marquee = document.getElementById('marquee');
        const spinButton = document.getElementById('spin-button');
        const resultText = document.getElementById('result-text');

        const marquee2 = document.getElementById('marquee2');
        const marquee3 = document.getElementById('marquee3');
        const length = 100;
        // 顯示六十甲子列表
        function createMarquee() {

            for (i = 0; i < length; i++) {
                sixtyJiazi.forEach(jiazi => {
                    const span = document.createElement('span');
                    span.textContent = jiazi;
                    marquee.appendChild(span);
                });

            }


            for (i = 0; i < length * 5; i++) {
                sixtyJiazi2.forEach(jiazi => {
                    const span = document.createElement('span');
                    span.textContent = jiazi;
                    marquee2.appendChild(span);

                });
            }
            for (i = 0; i < length * 5; i++) {
                sixtyJiazi2.forEach(jiazi => {
                    const span = document.createElement('span');
                    span.textContent = jiazi;
                    marquee3.appendChild(span);

                });
            }
        }



        createMarquee(); // 初始化跑馬燈

        let currentPosition = 0;  // 當前滾動的位置
        let speed;  // 初始滾動速度
        let interval;  // 定時器ID
        let interval2;
        let interval3;
        let stopPosition = 0;  // 用來記錄最終停下來的相對位置
        let isSpinning = false;  // 防止重複點擊的標誌

        // 開始滾動跑馬燈
        function startMarquee() {
            clearInterval(interval);  // 清除之前的定時器
            clearInterval(interval2);
            clearInterval(interval3);
            currentPosition = 0;  // 重置滾動位置
            marquee.style.transform = `translateY(0px)`;  // 初始化跑馬燈位置
            marquee2.style.transform = `translateY(0px)`;
            marquee3.style.transform = `translateY(0px)`;


            isSpinning = true;  // 標記為正在滾動
            const r = getRandomDuration(1, 5) * 10;  // 隨機時間
            const r2 = getRandomDuration(1, 5) * 10;  // 隨機時間
            const r3 = getRandomDuration(1, 5) * 10;  // 隨機時間
            interval = setInterval(() => {
                currentPosition -= speed;  // 向上滾動
                marquee.style.transform = `translateY(${currentPosition}px)`;  // 更新跑馬燈的位置
            }, r);  // 

            interval2 = setInterval(() => {
                currentPosition -= speed;  // 向上滾動
                marquee2.style.transform = `translateY(${currentPosition}px)`;  // 更新跑馬燈的位置
            }, r2);  // 設定滾動速度

            interval3 = setInterval(() => {
                currentPosition -= speed;  // 向上滾動
                marquee3.style.transform = `translateY(${currentPosition}px)`;  // 更新跑馬燈的位置
            }, r3);  // 設定滾動速度



        }

        // 停止跑馬燈滾動
        function stopMarquee() {
            clearInterval(interval);  // 停止滾動
            isSpinning = false;  // 標記為已停止
        }
        function stopMarquee2() {
            clearInterval(interval2);  // 停止滾動
        }
        function stopMarquee3() {
            clearInterval(interval3);  // 停止滾動
        }


        // 隨機生成滾動的時間
        function getRandomDuration(min, max) {
            return Math.random() * (max - min) + min;  // 返回隨機時間
        }

        // 當點擊「抽籤」按鈕時觸發
        spinButton.addEventListener('click', () => {
            if (isSpinning) return;  // 防止重複點擊

            startMarquee();  // 開始滾動
            speed = 60;  // 初始滾動速度

            // 設定隨機滾動時間
            const randomDuration = getRandomDuration(1, 5) * 1000;  // 隨機時間
            const randomDuration2 = getRandomDuration(1, 5) * 1000;  // 隨機時間
            const randomDuration3 = getRandomDuration(1, 5) * 1000;  // 隨機時間
            // 在隨機時間後，開始減速並停止
            setTimeout(() => {
                speed = 10;  // 減慢滾動速度
                setTimeout(() => {
                    stopMarquee();  // 停止滾動
                }, 3000);  // 延遲3秒顯示結果
            }, randomDuration);  // 隨機延遲

            setTimeout(() => {
                speed = 10;  // 減慢滾動速度
                setTimeout(() => {
                    stopMarquee2();  // 停止滾動
                }, 3000);  // 延遲3秒顯示結果
            }, randomDuration2);  // 隨機延遲

            setTimeout(() => {
                speed = 10;  // 減慢滾動速度
                setTimeout(() => {
                    stopMarquee3();  // 停止滾動
                }, 3000);  // 延遲3秒顯示結果
            }, randomDuration3);  // 隨機延遲


        });
    </script>
</body>

</html>
